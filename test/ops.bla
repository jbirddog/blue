
include "../tools/bth/bth.inc"

test

litw	'07'
plan

; test setincb
here

here
litb	0x01
setincb

litb	0x01
sub
okeq

; test setincd
here

here
litb	0x01
setincd

litb	0x04
sub
okeq

; test setincq
here

here
litb	0x01
setincq

litb	0x08
sub
okeq

; test cb
here

litb	0xC3
cb
here
litb	0x01
sub
atb
litb	0xC3
okeq

drop

; test cd
here

litb	0xC3
cd
here
litb	0x04
sub
atb
litb	0xC3
okeq

drop

; test cq
here

litb	0xC3
cq
here
litb	0x08
sub
atb
litb	0xC3
okeq

drop

;
; control flow
;

start
start
eq
comp
	litb	0x01
endcomp
comp
endcomp
ifelse
start
dup
litb	0x0A
add
eq
comp
endcomp
comp
	litb	0x03
endcomp
ifelse

add
litb	0x04
eq
comp
endcomp
comp
	litb	0xFF
	exit
endcomp
ifelse

; jump over litb 07 exit
ip
litb	0x07
add
setip
litb	0x07
exit

;
; fin
;

; set code buffer back to start
start
sethere
start
here
okeq

done
