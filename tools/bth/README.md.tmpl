# BlueVM Test Harness

Patched version of the BlueVM with extended opcodes to facilitate testing.

## Building

To build `bth` run `make` after `make` has been run in the root of the repo.

## Opcodes

Opcodes are subject to change and can be used in `.bla` files by including `bth.inc`.

### Internal Opcodes

| Opcode | Name | Stack Effect | Description |
|----|----|----|----|
_INTERNAL_OPS_TBL_

### TAP Opcodes

| Opcode | Name | Stack Effect | Description |
|----|----|----|----|
_TAP_OPS_TBL_

## TODOs

1. Print "TAP version 14" when testing begins
1. Split ops_low.bla into ops_pri.bla and ops_pub.bla
   1. Separate ops tables in README, etc
   1. Separate includes
1. Redo wprep, wlen, waddr to use cxord, cmovd, etc
1. bth.inc and tap.inc tmpl/sh files could be merged
