
CELL_SIZE = 8

INPUT_BUFFER_OFFSET = 0
INPUT_BUFFER_SIZE = 2048

RETURN_STACK_OFFSET = INPUT_BUFFER_OFFSET + INPUT_BUFFER_SIZE
RETURN_STACK_SIZE = 1024

DATA_STACK_OFFSET = RETURN_STACK_OFFSET + RETURN_STACK_SIZE
DATA_STACK_SIZE = 512

VM_DATA_OFFSET = DATA_STACK_OFFSET + DATA_STACK_SIZE
VM_DATA_SIZE = 256

HOST_DATA_OFFSET = VM_DATA_OFFSET + VM_DATA_SIZE
HOST_DATA_SIZE = 256

OPCODE_MAP_OFFSET = HOST_DATA_OFFSET + HOST_DATA_SIZE
OPCODE_MAP_SIZE = 4096

CODE_BUFFER_OFFSET = OPCODE_MAP_OFFSET + OPCODE_MAP_SIZE
CODE_BUFFER_SIZE = 4096

MEM_SIZE = CODE_BUFFER_OFFSET + CODE_BUFFER_SIZE

assert OPCODE_MAP_OFFSET = 4096
assert CODE_BUFFER_OFFSET = (4096 * 2)
assert MEM_SIZE = (4096 * 3)

OPCODE_HANDLER_COMPILE = opcode_handler_compile
OPCODE_HANDLER_INTERPRET = opcode_handler_interpret
OPCODE_HANDLER_INVALID = _opcode_handler_invalid

OPCODE_ENTRY_FLAG_IMMEDIATE = 1 shl 0

ERR_DATA_STACK_UNDERFLOW = 105
ERR_DATA_STACK_OVERFLOW = 106
ERR_RETURN_STACK_UNDERFLOW = 107
ERR_RETURN_STACK_OVERFLOW = 108
